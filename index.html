<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
</body>
<!-- Load TensorFlow.js. This is required to use coco-ssd model. -->
<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
<!-- Load the coco-ssd model. -->
<script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/coco-ssd"></script>

<!-- Replace the img with a video element -->
<video id="video" width="640" height="480" autoplay muted></video>

<!-- Place your code in the script tag below. You can also use an external .js file -->
<script>
  const video = document.getElementById('video');

  // Access the webcam stream and assign it to the video element
  navigator.mediaDevices.getUserMedia({ video: true })
    .then(stream => {
      video.srcObject = stream;
      video.play();
    })
    .catch(err => {
      console.error('Error accessing the webcam: ', err);
    });

  // Load the model and wait for the video to be ready
  cocoSsd.load().then(model => {
    // Wait for the video to be fully loaded and ready
    video.addEventListener('loadeddata', () => {
      // Run object detection periodically
      const detectObjects = () => {
        if (video.readyState === 4) { // Video is ready
          model.detect(video).then(predictions => {
            console.log('Predictions: ', predictions);
          });
        }
        requestAnimationFrame(detectObjects); // Continue detecting objects
      };
      detectObjects();
    });
  });
</script>
<script src="script.js"></script>
</html>